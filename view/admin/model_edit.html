{% extends "./inc/base.html" %}
{% block style %}
<link rel="stylesheet" href="/static/js/chosen/chosen.css" type="text/css" />
<style>
    .chzn-container-multi .chzn-choices .search-choice{
        margin: 3px 5px;
        display: block;
    }
    .chzn-container-multi .chzn-choices li{
        float: none;
    }
</style>
{%endblock%}
{% block content %}
<section class="vbox">
    <header class="header bg-light dk">
        <p>{{controller.meta_title}}</p>
    </header>
    <section class="scrollable wrapper">
        <div class="row">
            <div class="col-lg-12">
                <section class="panel panel-default">
                    <header class="panel-heading text-right bg-light">
                        <ul class="nav nav-tabs pull-left">
                            <li class="active"><a data-toggle="tab" href="#tab-1"><i class="fa fa-cog text-muted"></i> 基础</a></li>
                            <li class=""><a data-toggle="tab" href="#tab-2"><i class="fa fa-cog text-muted"></i> 设计</a></li>
                            <li class="">
                                <a data-toggle="tab"  href="#tab-3"><i class="fa fa-cog text-muted"></i> 高级</a>
                            </li>
                        </ul>
                        <span class="hidden-sm">Left</span>
                    </header>
                    <div class="panel-body">
                        <form id="ajaxForm" method="post" class="form-horizontal" action="/admin/model/add" data-validate="parsley">
                        <div class="tab-content">

                            <div id="tab-1" class="tab-pane fade active in">
                                <div class="form-group">
                                    <label class="col-sm-2 control-label">模型标识</label>

                                    <div class="col-sm-10">

                                        <div class="row">
                                            <div class="col-md-4">
                                                <input type="text" class="form-control  " name="name" value="{{info.name}}" data-required="true">
                                            </div>
                                            <div class="col-md-12">
                                                <span class="help-block m-b-none">请输入文档模型标识</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="line line-dashed b-b line-lg pull-in"></div>
                                <div class="form-group">
                                    <label class="col-sm-2 control-label">模型名称</label>

                                    <div class="col-sm-10">
                                        <div class="row">
                                            <div class="col-md-4">
                                                <input type="text" class="form-control  " name="title" value="{{info.title}}"
                                                       data-required="true" data-Remote="/admin/setup/parsley">
                                            </div>
                                            <div class="col-md-12">
                                                <span class="help-block m-b-none">请输入模型的名称</span>
                                            </div>
                                        </div>

                                    </div>
                                </div>
                                <div class="line line-dashed b-b line-lg pull-in"></div>
                                <div class="form-group">
                                    <label class="col-sm-2 control-label">模型类型</label>

                                    <div class="col-sm-10">
                                        <div class="row">
                                            <div class="col-md-4 ">
                                                <select class="form-control " name="extend">
                                                    <option value="0" {% if info.extend == 0 %}selected {% endif %}>独立模型</option>
                                                    <option value="1" {% if info.extend == 1 %}selected {% endif %}>文档模型</option>
                                                </select>
                                            </div>
                                            <div class="col-md-12">
                                                <span class="help-block m-b-none">（配置分组 用于批量设置 不分组则不会显示在系统设置中）</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                            </div>
                            <div id="tab-2" class="tab-pane fade">
                                <div class="form-group">
                                    <label class="col-sm-2 control-label">选择字段</label>
                                    <div class="col-sm-10">
                                        <select style="width:260px" multiple class="chosen-select">
                                            {% if fields %}

                                            <optgroup label="自定义字段">
                                                {% for v in fields %}
                                                <option value="{{v.id}}">{{v.title}} : {{v.name}}</option>
                                                {% endfor %}
                                            </optgroup>
                                            {% endif %}
                                            {% if extend_fields %}

                                            <optgroup label="系统字段">
                                                {% for v in extend_fields %}
                                                <option value="{{v.id}}">{{v.title}} : {{v.name}}</option>
                                                {% endfor %}
                                            </optgroup>
                                            {% endif %}


                                        </select>
                                    </div>
                                </div>

                            </div>

                            <div id="tab-3" class="tab-pane fade">dropdown1</div>

                        </div>
                        <div class="line line-dashed b-b line-lg pull-in"></div>
                        <div class="form-group">
                            <div class="col-sm-4 col-sm-offset-2">
                                <button class="btn btn-primary btn-s-md ajax-post confirm" type="submit" target-form="form-horizontal">确定</button>
                                <button class="btn btn-default" onclick="javascript:history.back(-1);return false;"
                                        type="submit">返回
                                </button>

                            </div>
                        </div>
                        </form>
                    </div>
                </section>
            </div>
        </div>

    </section>
</section>

{% endblock%}

{% block script%}
<script src="/static/js/parsley/parsley.min.js"></script>
<script src="/static/js/parsley/parsley.extend.js"></script>
<script src="/static/js/chosen/chosen.jquery.min.js"></script>
<script>
    $(".chosen-select").chosen({
            placeholder_text:"选择字段"
    });
</script>
{% endblock%}